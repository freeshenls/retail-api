<%# app/components/auth/register_component.html.erb %>
<div class="min-h-screen flex items-center justify-center bg-cover bg-center bg-no-repeat py-12 px-4" 
     style="background-image: url('<%= asset_path('bg.jpg') %>');">
  
  <div class="max-w-[260px] w-full p-5 bg-white rounded-2xl shadow-md">
    
    <%# 标题区域 %>
    <div class="text-center mb-4">
      <h3 class="text-lg font-bold text-[#0066b3]"><%= @title %></h3>
      <div class="w-8 h-1 bg-[#3b82f6] mx-auto mt-2 rounded"></div>
    </div>

    <%= form_for(@resource, as: @resource_name, url: @url, html: { class: "space-y-3", id: "register-form" }) do |f| %>
      <%= render "devise/shared/error_messages", resource: @resource %>

      <div class="relative">
        <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
          <%= heroicon "user", variant: :outline, options: { class: "h-4 w-4" } %>
        </span>
        <%= f.text_field :name, placeholder: "姓名", 
            class: "w-full pl-8 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
      </div>

      <div class="relative">
        <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
          <%= heroicon "envelope", variant: :outline, options: { class: "h-4 w-4" } %>
        </span>
        <%= f.text_field :email, placeholder: "邮箱", 
            class: "w-full pl-8 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
      </div>

      <div data-controller="auth--register-component" class="space-y-3">
        <div class="relative">
          <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
            <%= heroicon "lock-closed", variant: :outline, options: { class: "h-4 w-4" } %>
          </span>
          <%= f.password_field :password, placeholder: "密码", 
              data: { auth__register_component_target: "password" },
              class: "w-full pl-8 pr-10 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
          <button type="button" 
                  data-action="click->auth--register-component#togglePassword" 
                  class="absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer hover:text-blue-500 transition-colors">
            <%= heroicon "eye", variant: :outline, options: { class: "h-4 w-4" } %>
          </button>
        </div>

        <div class="relative">
          <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
            <%= heroicon "shield-check", variant: :outline, options: { class: "h-4 w-4" } %>
          </span>
          <%= f.password_field :password_confirmation, placeholder: "确认密码", 
              class: "w-full pl-8 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
        </div>
        <%# 验证码输入框：注意 name 属性，让它提交到 params[:code] %>
        <div class="relative">
          <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
            <%= heroicon "ticket", variant: :outline, options: { class: "h-4 w-4" } %>
          </span>
          <%= f.text_field :code, placeholder: "邀请码", 
              class: "w-full pl-8 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
        </div>
      </div>

      <%= f.submit @button_text, 
          class: "w-full py-2 px-3 text-sm font-medium rounded-full text-white bg-gradient-to-r from-blue-500 to-blue-400 hover:from-blue-600 hover:to-blue-500 cursor-pointer transition duration-150 border-none mt-2" %>
    <% end %>

    <div class="text-center text-[10px] text-gray-700 mt-3">
      <%= @link_text %> <%= link_to @link_label, @link_path, class: "text-blue-600 hover:text-blue-500 font-medium no-underline hover:underline" %>
    </div>
  </div>
</div>
