<%# app/components/auth/login_component.html.erb %>
<div class="min-h-screen flex items-center justify-center bg-cover bg-center bg-no-repeat py-12 px-4" 
     style="background-image: url('<%= asset_path('bg.jpg') %>');">
  
  <div class="max-w-[260px] w-full p-5 bg-white rounded-2xl shadow-md">
    
    <%# 标题区域 %>
    <div class="text-center mb-4">
      <h3 class="text-lg font-bold text-[#0066b3]"><%= @title %></h3>
      <div class="w-8 h-1 bg-[#3b82f6] mx-auto mt-2 rounded"></div>
    </div>

    <%= form_for(@resource, as: @resource_name, url: @url, html: { class: "space-y-3", id: "login-form" }) do |f| %>
      <%# Flash 消息提示 %>
      <% if helpers.alert.present? %>
        <p class="text-[10px] text-red-500 text-center bg-red-50 py-1 rounded"><%= helpers.alert %></p>
      <% end %>
      <% if helpers.notice.present? %>
        <p class="text-[10px] text-green-600 text-center bg-green-50 py-1 rounded"><%= helpers.notice %></p>
      <% end %>

      <%# 邮箱输入框 %>
      <div class="relative">
        <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
          <%= heroicon "envelope", variant: :outline, options: { class: "h-4 w-4" } %>
        </span>
        <%= f.text_field :email, placeholder: "邮箱", 
            class: "w-full pl-8 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
      </div>

      <%# 密码输入框 - 绑定 Stimulus 控制器 %>
      <div class="relative" data-controller="auth--login-component">
        <span class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 z-10">
          <%= heroicon "lock-closed", variant: :outline, options: { class: "h-4 w-4" } %>
        </span>
        
        <%# Target 绑定：使用下划线，Rails 会自动转义为 data-auth--login-component-target %>
        <%= f.password_field :password, 
            data: { auth__login_component_target: "password" }, 
            placeholder: "密码", 
            class: "w-full pl-8 pr-10 py-1.5 text-sm border border-gray-300 rounded-md focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400" %>
        
        <%# Action 绑定：必须使用 auth--login-component 连接方法 %>
        <button type="button" 
                data-action="click->auth--login-component#togglePassword" 
                class="absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer hover:text-blue-500 transition-colors">
          <%= heroicon "eye", variant: :outline, options: { class: "h-4 w-4" } %>
        </button>
      </div>

      <%# 记住我 %>
      <div class="flex items-center justify-between text-[10px] mt-1 text-gray-700">
        <label class="flex items-center cursor-pointer">
          <%= f.check_box :remember_me, class: "h-3.5 w-3.5 text-blue-600 border-gray-300 rounded focus:ring-0" %>
          <span class="ml-1.5">记住我</span>
        </label>
      </div>

      <%# 提交按钮 %>
      <%= f.submit @button_text, 
          class: "w-full py-2 px-3 text-sm font-medium rounded-full text-white bg-gradient-to-r from-blue-500 to-blue-400 hover:from-blue-600 hover:to-blue-500 cursor-pointer transition duration-150 border-none" %>
    <% end %>

    <%# 底部跳转链接 %>
    <div class="text-center text-[10px] text-gray-700 mt-3">
      <%= @link_text %> <%= link_to @link_label, @link_path, class: "text-blue-600 hover:text-blue-500 font-medium no-underline hover:underline" %>
    </div>
  </div>
</div>