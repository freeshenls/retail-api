<div class="max-w-4xl mx-auto space-y-6 py-8">
  <%# 顶部面包屑/返回区 %>
  <div class="flex items-center justify-between px-2">
    <div class="flex items-center gap-3">
      <%= link_to admin_users_path, 
                  data: { turbo_frame: "main_content" }, 
                  class: "group flex items-center text-slate-400 hover:text-[#0066b3] transition-all" do %>
        <div class="p-2 rounded-lg group-hover:bg-blue-50 transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
        </div>
        <span class="text-sm font-bold ml-1">返回列表</span>
      <% end %>
      <span class="text-slate-200">/</span>
      <h2 class="text-sm font-bold text-slate-700 tracking-wider">创建新系统成员</h2>
    </div>
  </div>

  <%# 主表单卡片 %>
  <div class="bg-white border border-slate-200 rounded-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden">
    <%# 装饰性页眉 %>
    <div class="bg-slate-50/50 px-8 py-5 border-b border-slate-100 flex items-center gap-3">
      <span class="w-1.5 h-5 bg-[#0066b3] rounded-full"></span>
      <div>
        <h3 class="text-sm font-black text-slate-700 leading-none">账号初始设置</h3>
      </div>
    </div>

    <%= form_with(model: @user, url: admin_users_path, class: "divide-y divide-slate-100") do |f| %>
      <%# 1. 基础资料区 %>
      <div class="p-8 space-y-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <%# 用户姓名 %>
          <div class="space-y-2">
            <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest ml-1">用户姓名</label>
            <div class="relative group">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-4 h-4 text-slate-300 group-focus-within:text-[#0066b3] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
              </div>
              <%= f.text_field :name, placeholder: "请输入真实姓名", class: "block w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:bg-white focus:ring-4 focus:ring-[#0066b3]/5 focus:border-[#0066b3] transition-all outline-none" %>
            </div>
          </div>

          <%# 权限分配 (Dropdown 模式) %>
          <div class="space-y-2">
            <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest ml-1">权限分配</label>
            <div class="relative group" data-controller="dropdown admin--user-new-component">
              <button type="button" 
                      data-action="dropdown#toggle click@window->dropdown#hide" 
                      class="w-full flex items-center justify-between py-2.5 px-4 bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg font-bold hover:border-[#0066b3] transition-all cursor-pointer shadow-sm">
                <span data-admin--user-new-component-target="roleName">请选择初始角色...</span>
                <svg class="w-4 h-4 text-slate-400 group-hover:text-[#0066b3]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
              </button>

              <%= f.hidden_field :role_id, data: { "admin--user-new-component-target": "hiddenInput" } %>

              <div data-dropdown-target="menu" 
                   class="hidden absolute z-50 mt-2 w-full bg-white border border-slate-200 rounded-xl shadow-xl py-1.5 animate-in fade-in zoom-in-95 duration-100">
                <% @roles.each do |role| %>
                  <button type="button" 
                          data-action="click->admin--user-new-component#selectRole"
                          data-admin--user-new-component-id-param="<%= role.id %>"
                          data-admin--user-new-component-desc-param="<%= role.description %>"
                          class="w-full text-left px-4 py-2.5 text-sm font-bold text-slate-600 hover:bg-[#0066b3]/5 hover:text-[#0066b3] transition-colors cursor-pointer border-none">
                    <%= role.description %>
                  </button>
                <% end %>
              </div>
            </div>
          </div>
        </div>

        <%# 核心账号信息 %>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 pt-4">
          <div class="space-y-2">
            <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest ml-1">登录邮箱</label>
            <%= f.email_field :email, placeholder: "email@example.com", class: "block w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:bg-white focus:ring-4 focus:ring-[#0066b3]/5 focus:border-[#0066b3] transition-all outline-none" %>
          </div>

          <div class="space-y-2">
            <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest ml-1">初始密码</label>
            <%= f.password_field :password, placeholder: "设置至少 6 位密码", class: "block w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:bg-white focus:ring-4 focus:ring-[#0066b3]/5 focus:border-[#0066b3] transition-all outline-none" %>
          </div>
        </div>
      </div>

      <%# 底部操作区 %>
      <div class="px-8 py-6 bg-slate-50/50 flex items-center justify-between">
        <p class="text-[10px] text-slate-400 font-bold italic tracking-tight">
          * 新成员创建后可立即通过邮箱登录
        </p>
        <div class="flex items-center gap-4">
          <%= link_to "取消", admin_users_path, data: { turbo_frame: "main_content" }, class: "px-6 py-2.5 text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors" %>
          <%= f.submit "创建账户", class: "px-10 py-2.5 bg-[#0066b3] text-white text-xs font-black rounded-lg shadow-md hover:bg-[#005596] active:transform active:scale-95 transition-all cursor-pointer tracking-widest" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
