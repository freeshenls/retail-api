<%# app/javascript/controllers/finance/chart_order_component.html.erb %>
<div class="bg-white border-2 border-slate-200 rounded-[2rem] p-8 shadow-sm">
  <%# 头部区域 %>
  <div class="flex items-center justify-between mb-6">
    <div>
      <h3 class="text-sm font-black text-slate-800">订单成交趋势</h3>
      <p class="text-xs text-slate-400 mt-1">最近 7 天的统计数据</p>
    </div>
    <div class="flex items-center space-x-3">
      <%# 实时标签 %>
      <div class="flex items-center px-2.5 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-bold border border-emerald-100">
        <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse mr-1.5"></span>
        实时更新
      </div>
      <%# 图例 %>
      <div class="flex items-center space-x-2">
        <span class="w-3 h-3 rounded-full bg-blue-500"></span>
        <span class="text-xs font-medium text-slate-500">成交量</span>
      </div>
    </div>
  </div>

  <%# 图表区域 %>
  <div class="relative h-[250px] w-full">
    <canvas data-controller="chartjs"
            data-chartjs-data-value="<%= chart_data.to_json %>"
            data-chartjs-options-value='{
              "responsive": true,
              "maintainAspectRatio": false,
              "layout": {
                "padding": { "top": 10, "bottom": 0 }
              },
              "scales": {
                "y": {
                  "beginAtZero": true,
                  "grid": {
                    "color": "rgba(241, 245, 249, 1)",
                    "drawBorder": false
                  },
                  "ticks": {
                    "stepSize": 1,
                    "color": "#94a3b8",
                    "font": { "size": 11 }
                  }
                },
                "x": {
                  "grid": { "display": false },
                  "ticks": {
                    "color": "#94a3b8",
                    "font": { "size": 11 }
                  }
                }
              },
              "plugins": {
                "legend": { "display": false },
                "tooltip": {
                  "backgroundColor": "#1e293b",
                  "padding": 12,
                  "titleFont": { "size": 12 },
                  "bodyFont": { "size": 12 },
                  "cornerRadius": 8,
                  "displayColors": false
                }
              },
              "elements": {
                "point": {
                  "radius": 4,
                  "hoverRadius": 6,
                  "backgroundColor": "#ffffff",
                  "borderWidth": 3
                }
              }
            }'>
    </canvas>
  </div>
</div>
